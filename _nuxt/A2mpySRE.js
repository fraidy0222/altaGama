import{y as D,aB as F,G as E,aC as U,r as w,B as W,H as K,aD as R,M as B,Q as _,aE as g,a0 as x,aF as A,aG as H,aH as Y,aI as k,aJ as L,J as G,o as j,w as q,D as J,x as V,P as X,aK as Q,m as I,ax as z,A as Z,aL as ee,l as P,aM as te,aq as ne,aN as M,aO as ae}from"./BqQQdesO.js";let re=0;function pe(t,n="reka"){const e=D({useId:void 0});return F?`${n}-${F()}`:e.useId?`${n}-${e.useId()}`:`${n}-${++re}`}function ye(t){return t?"open":"closed"}function he(t){const n=E();for(const e of t)if(e===n||(e.focus(),E()!==n))return}const oe=U(()=>w([]));function se(){const t=oe();return{add(n){const e=t.value[0];n!==e&&(e==null||e.pause()),t.value=T(t.value,n),t.value.unshift(n)},remove(n){var e;t.value=T(t.value,n),(e=t.value[0])==null||e.resume()}}}function T(t,n){const e=[...t],s=e.indexOf(n);return s!==-1&&e.splice(s,1),e}function ue(t){return t.filter(n=>n.tagName!=="A")}const ge=W({__name:"FocusScope",props:{loop:{type:Boolean,default:!1},trapped:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:n}){const e=t,s=n,{currentRef:u,currentElement:m}=K(),v=w(null),p=se(),l=R({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});B(o=>{if(!_)return;const a=m.value;if(!e.trapped)return;function r(f){if(l.paused||!a)return;const y=f.target;a.contains(y)?v.value=y:g(v.value,{select:!0})}function d(f){if(l.paused||!a)return;const y=f.relatedTarget;y!==null&&(a.contains(y)||g(v.value,{select:!0}))}function i(f){a.contains(v.value)||g(a)}document.addEventListener("focusin",r),document.addEventListener("focusout",d);const c=new MutationObserver(i);a&&c.observe(a,{childList:!0,subtree:!0}),o(()=>{document.removeEventListener("focusin",r),document.removeEventListener("focusout",d),c.disconnect()})}),B(async o=>{const a=m.value;if(await x(),!a)return;p.add(l);const r=E();if(!a.contains(r)){const i=new CustomEvent(A,L);a.addEventListener(A,c=>s("mountAutoFocus",c)),a.dispatchEvent(i),i.defaultPrevented||(H(ue(Y(a)),{select:!0}),E()===r&&g(a))}o(()=>{a.removeEventListener(A,f=>s("mountAutoFocus",f));const i=new CustomEvent(k,L),c=f=>{s("unmountAutoFocus",f)};a.addEventListener(k,c),a.dispatchEvent(i),setTimeout(()=>{i.defaultPrevented||g(r??document.body,{select:!0}),a.removeEventListener(k,c),p.remove(l)},0)})});function h(o){if(!e.loop&&!e.trapped||l.paused)return;const a=o.key==="Tab"&&!o.altKey&&!o.ctrlKey&&!o.metaKey,r=E();if(a&&r){const d=o.currentTarget,[i,c]=Q(d);i&&c?!o.shiftKey&&r===c?(o.preventDefault(),e.loop&&g(i,{select:!0})):o.shiftKey&&r===i&&(o.preventDefault(),e.loop&&g(c,{select:!0})):r===d&&o.preventDefault()}}return(o,a)=>(j(),G(V(X),{ref_key:"currentRef",ref:u,tabindex:"-1","as-child":o.asChild,as:o.as,onKeydown:h},{default:q(()=>[J(o.$slots,"default")]),_:3},8,["as-child","as"]))}});var ie=function(t){if(typeof document>"u")return null;var n=Array.isArray(t)?t[0]:t;return n.ownerDocument.body},b=new WeakMap,S=new WeakMap,O={},C=0,$=function(t){return t&&(t.host||$(t.parentNode))},ce=function(t,n){return n.map(function(e){if(t.contains(e))return e;var s=$(e);return s&&t.contains(s)?s:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e})},le=function(t,n,e,s){var u=ce(n,Array.isArray(t)?t:[t]);O[e]||(O[e]=new WeakMap);var m=O[e],v=[],p=new Set,l=new Set(u),h=function(a){!a||p.has(a)||(p.add(a),h(a.parentNode))};u.forEach(h);var o=function(a){!a||l.has(a)||Array.prototype.forEach.call(a.children,function(r){if(p.has(r))o(r);else try{var d=r.getAttribute(s),i=d!==null&&d!=="false",c=(b.get(r)||0)+1,f=(m.get(r)||0)+1;b.set(r,c),m.set(r,f),v.push(r),c===1&&i&&S.set(r,!0),f===1&&r.setAttribute(e,"true"),i||r.setAttribute(s,"true")}catch(y){console.error("aria-hidden: cannot operate on ",r,y)}})};return o(n),p.clear(),C++,function(){v.forEach(function(a){var r=b.get(a)-1,d=m.get(a)-1;b.set(a,r),m.set(a,d),r||(S.has(a)||a.removeAttribute(s),S.delete(a)),d||a.removeAttribute(e)}),C--,C||(b=new WeakMap,b=new WeakMap,S=new WeakMap,O={})}},de=function(t,n,e){e===void 0&&(e="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),u=ie(t);return u?(s.push.apply(s,Array.from(u.querySelectorAll("[aria-live]"))),le(s,u,e,"aria-hidden")):function(){return null}};function be(t){let n;I(()=>Z(t),e=>{e?n=de(e):n&&n()}),z(()=>{n&&n()})}const fe=ee(()=>{const t=w(new Map),n=w(),e=P(()=>{for(const v of t.value.values())if(v)return!0;return!1}),s=D({scrollBody:w(!0)});let u=null;const m=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.body.style.removeProperty("--scrollbar-width"),document.body.style.overflow=n.value??"",M&&(u==null||u()),n.value=void 0};return I(e,(v,p)=>{var a;if(!_)return;if(!v){p&&m();return}n.value===void 0&&(n.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,h={padding:l,margin:0},o=(a=s.scrollBody)!=null&&a.value?typeof s.scrollBody.value=="object"?ne({padding:s.scrollBody.value.padding===!0?l:s.scrollBody.value.padding,margin:s.scrollBody.value.margin===!0?l:s.scrollBody.value.margin},h):h:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof o.padding=="number"?`${o.padding}px`:String(o.padding),document.body.style.marginRight=typeof o.margin=="number"?`${o.margin}px`:String(o.margin),document.body.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),M&&(u=ae(document,"touchmove",r=>ve(r),{passive:!1})),x(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function Ee(t){const n=Math.random().toString(36).substring(2,7),e=fe();e.value.set(n,t??!1);const s=P({get:()=>e.value.get(n)??!1,set:u=>e.value.set(n,u)});return te(()=>{e.value.delete(n)}),s}function N(t){const n=window.getComputedStyle(t);if(n.overflowX==="scroll"||n.overflowY==="scroll"||n.overflowX==="auto"&&t.clientWidth<t.scrollWidth||n.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const e=t.parentNode;return!(e instanceof Element)||e.tagName==="BODY"?!1:N(e)}}function ve(t){const n=t||window.event,e=n.target;return e instanceof Element&&N(e)?!1:n.touches.length>1?!0:(n.preventDefault&&n.cancelable&&n.preventDefault(),!1)}export{ge as _,Ee as a,be as b,he as f,ye as g,pe as u};
